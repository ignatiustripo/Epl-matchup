<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>eFootball Player Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
:root {
  --primary: #3b82f6;
  --secondary: #22d3ee;
  --success: #10b981;
  --danger: #ef4444;
  --warning: #f59e0b;
  --dark: #020617;
  --light: #f8fafc;
  --card-bg: rgba(255, 255, 255, 0.95);
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: #333;
  min-height: 100vh;
}

/* Player Header */
.player-header {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  padding: 1rem 2rem;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
  position: sticky;
  top: 0;
  z-index: 1000;
}

.player-nav {
  display: flex;
  justify-content: space-between;
  align-items: center;
  max-width: 1400px;
  margin: 0 auto;
}

.player-logo {
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 1.5rem;
  font-weight: 700;
  color: #3b82f6;
}

.player-nav-links {
  display: flex;
  gap: 1.5rem;
  align-items: center;
}

.player-nav-link {
  color: #4b5563;
  text-decoration: none;
  font-weight: 600;
  padding: 0.5rem 1rem;
  border-radius: 8px;
  transition: all 0.3s;
  display: flex;
  align-items: center;
  gap: 8px;
}

.player-nav-link:hover, .player-nav-link.active {
  background: #3b82f6;
  color: white;
}

.player-profile {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 0.5rem 1rem;
  background: #f3f4f6;
  border-radius: 12px;
}

.player-avatar {
  width: 40px;
  height: 40px;
  background: linear-gradient(135deg, #3b82f6, #22d3ee);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-weight: 700;
}

/* Player Container */
.player-container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 2rem;
}

/* Player Cards */
.player-card {
  background: var(--card-bg);
  border-radius: 16px;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.player-card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1.5rem;
  padding-bottom: 1rem;
  border-bottom: 2px solid #e5e7eb;
}

.player-card-title {
  color: #1f2937;
  font-size: 1.4rem;
  font-weight: 700;
}

/* Stats Grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1rem;
  margin-top: 1rem;
}

.player-stat-card {
  background: linear-gradient(135deg, #f3f4f6, #e5e7eb);
  border-radius: 12px;
  padding: 1.2rem;
  text-align: center;
  transition: transform 0.3s;
}

.player-stat-card:hover {
  transform: translateY(-5px);
}

.player-stat-value {
  font-size: 2.5rem;
  font-weight: 800;
  color: #3b82f6;
  line-height: 1;
  margin-bottom: 0.5rem;
}

.player-stat-label {
  color: #6b7280;
  font-size: 0.9rem;
  font-weight: 600;
}

/* Live Match Card */
.live-match-card {
  background: linear-gradient(135deg, #fef3c7, #fde68a);
  border-left: 4px solid #f59e0b;
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0% { box-shadow: 0 0 0 0 rgba(245, 158, 11, 0.4); }
  70% { box-shadow: 0 0 0 10px rgba(245, 158, 11, 0); }
  100% { box-shadow: 0 0 0 0 rgba(245, 158, 11, 0); }
}

.live-badge {
  background: #dc2626;
  color: white;
  padding: 0.3rem 1rem;
  border-radius: 20px;
  font-size: 0.8rem;
  font-weight: 700;
  animation: blink 1s infinite;
}

@keyframes blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

/* Match Cards */
.match-card {
  background: white;
  border-radius: 12px;
  padding: 1.2rem;
  margin-bottom: 1rem;
  border-left: 4px solid #3b82f6;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
  transition: transform 0.3s;
}

.match-card:hover {
  transform: translateY(-2px);
}

.match-teams {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
}

.team {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  flex: 1;
}

.team-name {
  font-weight: 600;
  font-size: 1.1rem;
}

.team-logo {
  width: 50px;
  height: 50px;
  background: linear-gradient(135deg, #3b82f6, #22d3ee);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 800;
  color: white;
  font-size: 1.2rem;
}

.vs {
  color: #6b7280;
  font-weight: 800;
  margin: 0 1rem;
  font-size: 1.2rem;
}

.match-score {
  display: flex;
  justify-content: center;
  gap: 1rem;
  font-size: 2rem;
  font-weight: 800;
  margin: 1rem 0;
  color: #1f2937;
}

.match-info {
  display: flex;
  justify-content: space-between;
  color: #6b7280;
  font-size: 0.9rem;
  padding-top: 1rem;
  border-top: 1px solid #e5e7eb;
}

/* Tables */
.player-table-container {
  overflow-x: auto;
  border-radius: 12px;
  border: 1px solid #e5e7eb;
  background: white;
}

.player-table {
  width: 100%;
  border-collapse: collapse;
  min-width: 800px;
}

.player-table th {
  background: #f9fafb;
  padding: 1rem;
  text-align: center;
  color: #374151;
  font-weight: 700;
  border-bottom: 2px solid #e5e7eb;
}

.player-table td {
  padding: 1rem;
  text-align: center;
  border-bottom: 1px solid #f3f4f6;
}

.player-table tr:hover {
  background: #f9fafb;
}

/* Form Indicator */
.form-indicator {
  display: flex;
  gap: 4px;
  justify-content: center;
}

.form-win {
  width: 24px;
  height: 24px;
  background: #10b981;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 12px;
  font-weight: 700;
}

.form-draw {
  width: 24px;
  height: 24px;
  background: #f59e0b;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 12px;
  font-weight: 700;
}

.form-loss {
  width: 24px;
  height: 24px;
  background: #ef4444;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 12px;
  font-weight: 700;
}

/* Tournament Selector */
.tournament-selector {
  display: flex;
  gap: 1rem;
  align-items: center;
  background: #f9fafb;
  padding: 1rem;
  border-radius: 12px;
  margin-bottom: 1.5rem;
}

/* Buttons */
.player-btn {
  background: linear-gradient(135deg, #3b82f6, #22d3ee);
  border: none;
  color: white;
  font-weight: 600;
  padding: 0.8rem 1.5rem;
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.3s;
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

.player-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(59, 130, 246, 0.3);
}

.btn-secondary {
  background: #f3f4f6;
  color: #374151;
}

/* Player Registration */
.registration-section {
  background: white;
  border-radius: 16px;
  padding: 2rem;
  margin: 2rem auto;
  max-width: 500px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
}

.registration-form {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.form-group {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.form-label {
  color: #374151;
  font-weight: 600;
  font-size: 0.9rem;
}

.form-input {
  padding: 0.8rem 1rem;
  border: 2px solid #e5e7eb;
  border-radius: 8px;
  font-size: 1rem;
  transition: border-color 0.3s;
}

.form-input:focus {
  outline: none;
  border-color: #3b82f6;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

/* Live Updates Indicator */
.live-updates {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: #10b981;
  color: white;
  padding: 0.5rem 1rem;
  border-radius: 20px;
  font-size: 0.8rem;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 8px;
  animation: pulse 2s infinite;
  z-index: 1000;
}

/* Utilities */
.hidden { display: none !important; }
.text-center { text-align: center; }
.mt-2 { margin-top: 0.5rem; }
.mt-4 { margin-top: 1rem; }
.mb-2 { margin-bottom: 0.5rem; }
.mb-4 { margin-bottom: 1rem; }
.d-flex { display: flex; }
.align-center { align-items: center; }
.justify-between { justify-content: space-between; }
.gap-2 { gap: 0.5rem; }
.gap-4 { gap: 1rem; }

/* Responsive */
@media (max-width: 768px) {
  .player-container { padding: 1rem; }
  .player-nav { flex-direction: column; gap: 1rem; }
  .player-nav-links { flex-wrap: wrap; justify-content: center; }
  .stats-grid { grid-template-columns: repeat(2, 1fr); }
  .match-teams { flex-direction: column; gap: 1rem; }
  .vs { margin: 0.5rem 0; }
}
</style>
</head>
<body>
<!-- Live Updates Indicator -->
<div id="liveUpdates" class="live-updates hidden">
  <i class="fas fa-sync-alt fa-spin"></i>
  <span>Live Updates Active</span>
</div>

<!-- Player Dashboard -->
<div id="playerDashboard">
  <!-- Player Header -->
  <header class="player-header">
    <div class="player-nav">
      <div class="player-logo">
        <i class="fas fa-futbol"></i>
        <span>eFootball Player Hub</span>
      </div>
      
      <div class="player-nav-links">
        <a href="#" class="player-nav-link active" onclick="showSection('dashboard')">
          <i class="fas fa-home"></i> Dashboard
        </a>
        <a href="#" class="player-nav-link" onclick="showSection('matches')">
          <i class="fas fa-calendar-alt"></i> Matches
        </a>
        <a href="#" class="player-nav-link" onclick="showSection('standings')">
          <i class="fas fa-trophy"></i> Standings
        </a>
        <a href="#" class="player-nav-link" onclick="showSection('players')">
          <i class="fas fa-users"></i> Players
        </a>
        <a href="#" class="player-nav-link" onclick="showSection('profile')">
          <i class="fas fa-user"></i> My Profile
        </a>
      </div>
      
      <div class="player-profile">
        <div class="player-avatar" id="playerAvatar">P</div>
        <div>
          <div id="playerNameDisplay" style="font-weight: 600;">Player</div>
          <div id="playerTeamDisplay" style="font-size: 0.8rem; color: #6b7280;">No Team</div>
        </div>
      </div>
    </div>
  </header>

  <!-- Player Container -->
  <div class="player-container">
    <!-- Tournament Selector -->
    <div class="tournament-selector">
      <i class="fas fa-trophy" style="color: #3b82f6;"></i>
      <select id="tournamentSelect" class="form-input" style="flex: 1;" onchange="loadPlayerData()">
        <option value="">Select Tournament</option>
      </select>
      <button class="player-btn" onclick="refreshPlayerData()">
        <i class="fas fa-sync-alt"></i> Refresh
      </button>
    </div>

    <!-- Dashboard Section -->
    <section id="dashboardSection" class="player-section">
      <div class="grid grid-2" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
        <!-- Player Stats -->
        <div class="player-card">
          <div class="player-card-header">
            <h2 class="player-card-title">My Stats</h2>
            <span class="player-stat-value" id="playerRating">0.0</span>
          </div>
          
          <div class="stats-grid">
            <div class="player-stat-card">
              <div class="player-stat-value" id="playerMatches">0</div>
              <div class="player-stat-label">Matches</div>
            </div>
            <div class="player-stat-card">
              <div class="player-stat-value" id="playerGoals">0</div>
              <div class="player-stat-label">Goals</div>
            </div>
            <div class="player-stat-card">
              <div class="player-stat-value" id="playerAssists">0</div>
              <div class="player-stat-label">Assists</div>
            </div>
            <div class="player-stat-card">
              <div class="player-stat-value" id="playerPoints">0</div>
              <div class="player-stat-label">Points</div>
            </div>
          </div>
          
          <div class="mt-4">
            <h3 style="color: #374151; margin-bottom: 1rem;">Recent Form</h3>
            <div class="form-indicator" id="playerForm">
              <!-- Form indicators will be added here -->
            </div>
          </div>
        </div>

        <!-- My Team -->
        <div class="player-card">
          <div class="player-card-header">
            <h2 class="player-card-title">My Team</h2>
            <span class="badge" style="background: #3b82f6; color: white; padding: 0.3rem 0.8rem; border-radius: 20px; font-size: 0.8rem;" id="teamRank">#0</span>
          </div>
          
          <div class="d-flex align-center gap-4" style="margin-bottom: 1.5rem;">
            <div class="team-logo" id="teamLogo">T</div>
            <div>
              <h3 id="teamName" style="color: #1f2937;">No Team</h3>
              <p id="teamStats" style="color: #6b7280;">P: 0 W: 0 D: 0 L: 0</p>
            </div>
          </div>
          
          <div class="stats-grid">
            <div class="player-stat-card">
              <div class="player-stat-value" id="teamWins">0</div>
              <div class="player-stat-label">Wins</div>
            </div>
            <div class="player-stat-card">
              <div class="player-stat-value" id="teamDraws">0</div>
              <div class="player-stat-label">Draws</div>
            </div>
            <div class="player-stat-card">
              <div class="player-stat-value" id="teamLosses">0</div>
              <div class="player-stat-label">Losses</div>
            </div>
            <div class="player-stat-card">
              <div class="player-stat-value" id="teamPoints">0</div>
              <div class="player-stat-label">Points</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Live Matches -->
      <div class="player-card mt-4">
        <div class="player-card-header">
          <h2 class="player-card-title">
            <i class="fas fa-broadcast-tower" style="color: #dc2626;"></i>
            Live Matches
          </h2>
          <span class="live-badge" id="liveMatchesCount">0 LIVE</span>
        </div>
        
        <div id="liveMatches">
          <!-- Live matches will be added here -->
        </div>
      </div>

      <!-- Upcoming Matches -->
      <div class="grid grid-2" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-top: 1.5rem;">
        <!-- Upcoming Matches -->
        <div class="player-card">
          <div class="player-card-header">
            <h2 class="player-card-title">Upcoming Matches</h2>
            <button class="player-btn btn-secondary" onclick="showSection('matches')">
              <i class="fas fa-arrow-right"></i>
            </button>
          </div>
          
          <div id="upcomingMatches">
            <!-- Upcoming matches will be added here -->
          </div>
        </div>

        <!-- Recent Results -->
        <div class="player-card">
          <div class="player-card-header">
            <h2 class="player-card-title">Recent Results</h2>
            <button class="player-btn btn-secondary" onclick="showSection('matches')">
              <i class="fas fa-arrow-right"></i>
            </button>
          </div>
          
          <div id="recentResults">
            <!-- Recent results will be added here -->
          </div>
        </div>
      </div>
    </section>

    <!-- Matches Section -->
    <section id="matchesSection" class="player-section hidden">
      <div class="player-card">
        <div class="player-card-header">
          <h2 class="player-card-title">All Matches</h2>
          <div class="d-flex gap-2">
            <select id="matchFilter" class="form-input" style="width: auto;" onchange="filterMatches()">
              <option value="all">All Matches</option>
              <option value="upcoming">Upcoming</option>
              <option value="live">Live</option>
              <option value="completed">Completed</option>
              <option value="myteam">My Team Only</option>
            </select>
            <select id="matchRound" class="form-input" style="width: auto;" onchange="filterByRound()">
              <option value="all">All Rounds</option>
            </select>
          </div>
        </div>
        
        <div id="allMatches">
          <!-- All matches will be added here -->
        </div>
      </div>
    </section>

    <!-- Standings Section -->
    <section id="standingsSection" class="player-section hidden">
      <div class="player-card">
        <div class="player-card-header">
          <h2 class="player-card-title">Tournament Standings</h2>
          <select id="standingsView" class="form-input" style="width: auto;" onchange="changeStandingsView()">
            <option value="table">Table View</option>
            <option value="topscorers">Top Scorers</option>
            <option value="assists">Most Assists</option>
            <option value="clean">Clean Sheets</option>
          </select>
        </div>
        
        <!-- Standings Table -->
        <div id="standingsTableView">
          <div class="player-table-container">
            <table class="player-table">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Team</th>
                  <th>P</th>
                  <th>W</th>
                  <th>D</th>
                  <th>L</th>
                  <th>GF</th>
                  <th>GA</th>
                  <th>GD</th>
                  <th>PTS</th>
                  <th>Form</th>
                </tr>
              </thead>
              <tbody id="standingsTable">
                <!-- Standings will be added here -->
              </tbody>
            </table>
          </div>
        </div>
        
        <!-- Top Scorers -->
        <div id="topScorersView" class="hidden">
          <div class="player-table-container">
            <table class="player-table">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Player</th>
                  <th>Team</th>
                  <th>Matches</th>
                  <th>Goals</th>
                  <th>Assists</th>
                  <th>Rating</th>
                </tr>
              </thead>
              <tbody id="topScorersTable">
                <!-- Top scorers will be added here -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </section>

    <!-- Players Section -->
    <section id="playersSection" class="player-section hidden">
      <div class="player-card">
        <div class="player-card-header">
          <h2 class="player-card-title">All Players</h2>
          <div class="d-flex gap-2">
            <input type="text" id="playerSearch" class="form-input" placeholder="Search players..." style="width: 200px;" onkeyup="searchPlayers()">
            <select id="playerFilter" class="form-input" style="width: auto;" onchange="filterPlayers()">
              <option value="all">All Players</option>
              <option value="forwards">Forwards</option>
              <option value="midfielders">Midfielders</option>
              <option value="defenders">Defenders</option>
              <option value="goalkeepers">Goalkeepers</option>
              <option value="myteam">My Team</option>
            </select>
          </div>
        </div>
        
        <div class="player-table-container">
          <table class="player-table">
            <thead>
              <tr>
                <th>#</th>
                <th>Player</th>
                <th>Team</th>
                <th>Position</th>
                <th>Matches</th>
                <th>Goals</th>
                <th>Assists</th>
                <th>Rating</th>
              </tr>
            </thead>
            <tbody id="playersTable">
              <!-- Players will be added here -->
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- Profile Section -->
    <section id="profileSection" class="player-section hidden">
      <div class="player-card">
        <div class="player-card-header">
          <h2 class="player-card-title">My Profile</h2>
          <button class="player-btn" onclick="editProfile()">
            <i class="fas fa-edit"></i> Edit
          </button>
        </div>
        
        <div class="grid grid-2" style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
          <!-- Profile Info -->
          <div>
            <div class="d-flex align-center gap-4 mb-4">
              <div class="player-avatar" id="profileAvatar" style="width: 80px; height: 80px; font-size: 2rem;">P</div>
              <div>
                <h2 id="profileName" style="color: #1f2937;">Player Name</h2>
                <p id="profileTeam" style="color: #6b7280;">No Team</p>
                <p id="profilePosition" style="color: #6b7280;">Position</p>
              </div>
            </div>
            
            <div class="form-group">
              <label class="form-label">Email</label>
              <input type="email" id="profileEmail" class="form-input" value="player@email.com" readonly>
            </div>
            
            <div class="form-group">
              <label class="form-label">Joined Date</label>
              <input type="text" id="profileJoined" class="form-input" value="2024-01-01" readonly>
            </div>
            
            <div class="form-group">
              <label class="form-label">Tournaments Joined</label>
              <div id="profileTournaments" style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 0.5rem;">
                <!-- Tournaments will be added here -->
              </div>
            </div>
          </div>
          
          <!-- Performance Stats -->
          <div>
            <h3 style="color: #374151; margin-bottom: 1rem;">Performance Statistics</h3>
            
            <div class="stats-grid">
              <div class="player-stat-card">
                <div class="player-stat-value" id="profileTotalGoals">0</div>
                <div class="player-stat-label">Total Goals</div>
              </div>
              <div class="player-stat-card">
                <div class="player-stat-value" id="profileTotalAssists">0</div>
                <div class="player-stat-label">Total Assists</div>
              </div>
              <div class="player-stat-card">
                <div class="player-stat-value" id="profileTotalMatches">0</div>
                <div class="player-stat-label">Total Matches</div>
              </div>
              <div class="player-stat-card">
                <div class="player-stat-value" id="profileAvgRating">0.0</div>
                <div class="player-stat-label">Avg Rating</div>
              </div>
            </div>
            
            <div class="mt-4">
              <h4 style="color: #374151; margin-bottom: 1rem;">Season Progress</h4>
              <div style="background: #f3f4f6; border-radius: 8px; padding: 1rem;">
                <div style="margin-bottom: 0.5rem;">
                  <span style="color: #6b7280; font-size: 0.9rem;">Goals this season</span>
                  <div style="background: #e5e7eb; height: 10px; border-radius: 5px; margin-top: 0.5rem; overflow: hidden;">
                    <div id="goalsProgress" style="background: #10b981; height: 100%; width: 0%;"></div>
                  </div>
                </div>
                
                <div style="margin-bottom: 0.5rem;">
                  <span style="color: #6b7280; font-size: 0.9rem;">Assists this season</span>
                  <div style="background: #e5e7eb; height: 10px; border-radius: 5px; margin-top: 0.5rem; overflow: hidden;">
                    <div id="assistsProgress" style="background: #3b82f6; height: 100%; width: 0%;"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Registration Section -->
    <section id="registrationSection" class="player-section hidden">
      <div class="registration-section">
        <h2 style="text-align: center; color: #1f2937; margin-bottom: 2rem;">Join Tournament</h2>
        
        <div class="registration-form">
          <div class="form-group">
            <label class="form-label">Player Name</label>
            <input type="text" id="registerName" class="form-input" placeholder="Enter your name">
          </div>
          
          <div class="form-group">
            <label class="form-label">Email</label>
            <input type="email" id="registerEmail" class="form-input" placeholder="Enter your email">
          </div>
          
          <div class="form-group">
            <label class="form-label">Select Tournament</label>
            <select id="registerTournament" class="form-input">
              <option value="">Select Tournament</option>
            </select>
          </div>
          
          <div class="form-group">
            <label class="form-label">Position</label>
            <select id="registerPosition" class="form-input">
              <option value="forward">Forward</option>
              <option value="midfielder">Midfielder</option>
              <option value="defender">Defender</option>
              <option value="goalkeeper">Goalkeeper</option>
            </select>
          </div>
          
          <button class="player-btn" onclick="registerPlayer()" style="width: 100%; margin-top: 1rem;">
            <i class="fas fa-user-plus"></i> Register
          </button>
          
          <div class="text-center mt-4">
            <p style="color: #6b7280;">Already registered?</p>
            <button class="player-btn btn-secondary" onclick="showSection('dashboard')">
              <i class="fas fa-sign-in-alt"></i> Go to Dashboard
            </button>
          </div>
        </div>
      </div>
    </section>
  </div>
</div>

<script>
// Player Data
const playerData = {
  currentPlayer: JSON.parse(localStorage.getItem('currentPlayer')) || null,
  tournaments: JSON.parse(localStorage.getItem('player_tournaments')) || [],
  teams: JSON.parse(localStorage.getItem('player_teams')) || [],
  players: JSON.parse(localStorage.getItem('player_players')) || [],
  matches: JSON.parse(localStorage.getItem('player_matches')) || [],
  liveUpdates: true,
  updateInterval: null
};

// Initialize Player Dashboard
function initPlayerDashboard() {
  if (!playerData.tournaments.length) {
    createSamplePlayerData();
  }
  
  if (!playerData.currentPlayer) {
    showRegistration();
  } else {
    updatePlayerProfile();
    loadTournaments();
    loadPlayerData();
    startLiveUpdates();
  }
  
  setupEventListeners();
}

// Create Sample Data
function createSamplePlayerData() {
  // Sample tournaments
  playerData.tournaments = [
    {
      id: 1,
      name: "Premier League 2024",
      type: "league",
      status: "ongoing",
      currentRound: 19,
      totalTeams: 20
    },
    {
      id: 2,
      name: "Champions League 2024",
      type: "champions",
      status: "group",
      currentRound: 4,
      totalTeams: 32
    }
  ];
  
  // Sample teams
  playerData.teams = [
    { id: 1, name: "Arsenal", shortCode: "ARS", color: "#EF0107", tournamentId: 1 },
    { id: 2, name: "Manchester City", shortCode: "MCI", color: "#6CABDD", tournamentId: 1 },
    { id: 3, name: "Liverpool", shortCode: "LIV", color: "#C8102E", tournamentId: 1 },
    { id: 4, name: "Bayern Munich", shortCode: "BAY", color: "#DC052D", tournamentId: 2 }
  ];
  
  // Sample players (including current player)
  playerData.currentPlayer = {
    id: 1001,
    name: "John Doe",
    email: "john@efootball.com",
    teamId: 1,
    position: "midfielder",
    avatar: "JD",
    stats: {
      matches: 15,
      goals: 8,
      assists: 5,
      rating: 7.8,
      form: ['W', 'W', 'D', 'L', 'W']
    },
    joined: "2024-01-01",
    tournaments: [1]
  };
  
  playerData.players = [
    playerData.currentPlayer,
    { id: 1002, name: "Erling Haaland", teamId: 2, position: "forward", stats: { matches: 19, goals: 18, assists: 5, rating: 8.2 } },
    { id: 1003, name: "Mohamed Salah", teamId: 3, position: "forward", stats: { matches: 19, goals: 14, assists: 8, rating: 7.9 } },
    { id: 1004, name: "Kevin De Bruyne", teamId: 2, position: "midfielder", stats: { matches: 15, goals: 5, assists: 12, rating: 8.1 } }
  ];
  
  // Sample matches
  playerData.matches = [
    { id: 1, tournamentId: 1, round: 19, homeTeamId: 1, awayTeamId: 2, date: "2024-01-15", time: "15:00", status: "completed", homeScore: 3, awayScore: 1 },
    { id: 2, tournamentId: 1, round: 19, homeTeamId: 3, awayTeamId: 4, date: "2024-01-15", time: "17:30", status: "completed", homeScore: 2, awayScore: 2 },
    { id: 3, tournamentId: 1, round: 20, homeTeamId: 1, awayTeamId: 3, date: "2024-01-22", time: "15:00", status: "scheduled", homeScore: 0, awayScore: 0 },
    { id: 4, tournamentId: 1, round: 20, homeTeamId: 2, awayTeamId: 4, date: "2024-01-22", time: "17:30", status: "scheduled", homeScore: 0, awayScore: 0 },
    { id: 5, tournamentId: 1, round: 18, homeTeamId: 2, awayTeamId: 3, date: "2024-01-08", time: "20:00", status: "live", homeScore: 1, awayScore: 1, minute: 65 }
  ];
  
  savePlayerData();
}

// Save Player Data
function savePlayerData() {
  localStorage.setItem('currentPlayer', JSON.stringify(playerData.currentPlayer));
  localStorage.setItem('player_tournaments', JSON.stringify(playerData.tournaments));
  localStorage.setItem('player_teams', JSON.stringify(playerData.teams));
  localStorage.setItem('player_players', JSON.stringify(playerData.players));
  localStorage.setItem('player_matches', JSON.stringify(playerData.matches));
}

// Update Player Profile Display
function updatePlayerProfile() {
  if (!playerData.currentPlayer) return;
  
  const player = playerData.currentPlayer;
  const team = playerData.teams.find(t => t.id === player.teamId);
  
  document.getElementById('playerAvatar').textContent = player.avatar || player.name.charAt(0);
  document.getElementById('playerNameDisplay').textContent = player.name;
  document.getElementById('playerTeamDisplay').textContent = team ? team.name : 'No Team';
  
  // Update profile section
  document.getElementById('profileAvatar').textContent = player.avatar || player.name.charAt(0);
  document.getElementById('profileName').textContent = player.name;
  document.getElementById('profileTeam').textContent = team ? team.name : 'No Team';
  document.getElementById('profilePosition').textContent = player.position.charAt(0).toUpperCase() + player.position.slice(1);
  document.getElementById('profileEmail').value = player.email || 'player@email.com';
  document.getElementById('profileJoined').value = player.joined || '2024-01-01';
}

// Load Tournaments
function loadTournaments() {
  const select = document.getElementById('tournamentSelect');
  const registerSelect = document.getElementById('registerTournament');
  
  select.innerHTML = '<option value="">Select Tournament</option>';
  registerSelect.innerHTML = '<option value="">Select Tournament</option>';
  
  playerData.tournaments.forEach(tournament => {
    const option = `<option value="${tournament.id}">${tournament.name}</option>`;
    select.innerHTML += option;
    registerSelect.innerHTML += option;
  });
  
  // Auto-select if player is in a tournament
  if (playerData.currentPlayer && playerData.currentPlayer.tournaments && playerData.currentPlayer.tournaments.length > 0) {
    select.value = playerData.currentPlayer.tournaments[0];
    loadPlayerData();
  }
}

// Load Player Data
function loadPlayerData() {
  const tournamentId = document.getElementById('tournamentSelect').value;
  if (!tournamentId) return;
  
  updatePlayerStats();
  updateTeamStats();
  loadLiveMatches();
  loadUpcomingMatches();
  loadRecentResults();
  loadStandings();
  loadPlayers();
  
  // Show live updates indicator
  document.getElementById('liveUpdates').classList.remove('hidden');
}

// Update Player Stats
function updatePlayerStats() {
  if (!playerData.currentPlayer) return;
  
  const player = playerData.currentPlayer;
  const stats = player.stats || {};
  
  document.getElementById('playerMatches').textContent = stats.matches || 0;
  document.getElementById('playerGoals').textContent = stats.goals || 0;
  document.getElementById('playerAssists').textContent = stats.assists || 0;
  document.getElementById('playerPoints').textContent = calculatePlayerPoints(stats);
  document.getElementById('playerRating').textContent = stats.rating ? stats.rating.toFixed(1) : '0.0';
  
  // Update form indicators
  const formContainer = document.getElementById('playerForm');
  formContainer.innerHTML = (stats.form || []).map(result => {
    if (result === 'W') return '<div class="form-win">W</div>';
    if (result === 'D') return '<div class="form-draw">D</div>';
    return '<div class="form-loss">L</div>';
  }).join('');
  
  // Update profile stats
  document.getElementById('profileTotalGoals').textContent = stats.goals || 0;
  document.getElementById('profileTotalAssists').textContent = stats.assists || 0;
  document.getElementById('profileTotalMatches').textContent = stats.matches || 0;
  document.getElementById('profileAvgRating').textContent = stats.rating ? stats.rating.toFixed(1) : '0.0';
  
  // Update progress bars
  const goalsProgress = Math.min(((stats.goals || 0) / 20) * 100, 100);
  const assistsProgress = Math.min(((stats.assists || 0) / 15) * 100, 100);
  document.getElementById('goalsProgress').style.width = goalsProgress + '%';
  document.getElementById('assistsProgress').style.width = assistsProgress + '%';
}

function calculatePlayerPoints(stats) {
  // Simple points calculation: 3 points per goal, 2 points per assist
  return (stats.goals || 0) * 3 + (stats.assists || 0) * 2;
}

// Update Team Stats
function updateTeamStats() {
  if (!playerData.currentPlayer) return;
  
  const teamId = playerData.currentPlayer.teamId;
  const team = playerData.teams.find(t => t.id === teamId);
  
  if (!team) return;
  
  // Calculate team stats from matches
  const teamMatches = playerData.matches.filter(m => 
    m.homeTeamId === teamId || m.awayTeamId === teamId
  );
  
  let stats = {
    played: 0,
    wins: 0,
    draws: 0,
    losses: 0,
    goalsFor: 0,
    goalsAgainst: 0,
    points: 0
  };
  
  teamMatches.forEach(match => {
    if (match.status === 'completed') {
      stats.played++;
      
      const isHome = match.homeTeamId === teamId;
      const teamScore = isHome ? match.homeScore : match.awayScore;
      const oppScore = isHome ? match.awayScore : match.homeScore;
      
      stats.goalsFor += teamScore;
      stats.goalsAgainst += oppScore;
      
      if (teamScore > oppScore) {
        stats.wins++;
        stats.points += 3;
      } else if (teamScore < oppScore) {
        stats.losses++;
      } else {
        stats.draws++;
        stats.points += 1;
      }
    }
  });
  
  // Update team display
  document.getElementById('teamName').textContent = team.name;
  document.getElementById('teamLogo').textContent = team.shortCode;
  document.getElementById('teamLogo').style.background = `linear-gradient(135deg, ${team.color}, #22d3ee)`;
  document.getElementById('teamStats').textContent = `P: ${stats.played} W: ${stats.wins} D: ${stats.draws} L: ${stats.losses}`;
  
  // Update team stats cards
  document.getElementById('teamWins').textContent = stats.wins;
  document.getElementById('teamDraws').textContent = stats.draws;
  document.getElementById('teamLosses').textContent = stats.losses;
  document.getElementById('teamPoints').textContent = stats.points;
  
  // Calculate team rank
  const tournamentId = document.getElementById('tournamentSelect').value;
  const tournamentTeams = playerData.teams.filter(t => t.tournamentId == tournamentId);
  const teamRank = calculateTeamRank(teamId, tournamentTeams);
  document.getElementById('teamRank').textContent = `#${teamRank}`;
}

function calculateTeamRank(teamId, teams) {
  // Simple ranking based on points (would be more complex in real system)
  return 1; // Placeholder
}

// Load Live Matches
function loadLiveMatches() {
  const liveMatches = playerData.matches.filter(m => m.status === 'live');
  const container = document.getElementById('liveMatches');
  const countElement = document.getElementById('liveMatchesCount');
  
  countElement.textContent = `${liveMatches.length} LIVE`;
  
  if (liveMatches.length === 0) {
    container.innerHTML = `
      <div class="text-center" style="padding: 3rem; color: #6b7280;">
        <i class="fas fa-broadcast-tower" style="font-size: 3rem; margin-bottom: 1rem; color: #d1d5db;"></i>
        <p>No live matches at the moment</p>
      </div>
    `;
    return;
  }
  
  container.innerHTML = liveMatches.map(match => {
    const homeTeam = playerData.teams.find(t => t.id === match.homeTeamId);
    const awayTeam = playerData.teams.find(t => t.id === match.awayTeamId);
    
    return `
      <div class="match-card live-match-card">
        <div class="live-badge">LIVE ${match.minute || '45'}'</div>
        <div class="match-teams">
          <div class="team">
            <div class="team-logo" style="background: linear-gradient(135deg, ${homeTeam.color}, #22d3ee);">
              ${homeTeam.shortCode}
            </div>
            <div class="team-name">${homeTeam.name}</div>
          </div>
          <div class="vs">VS</div>
          <div class="team">
            <div class="team-logo" style="background: linear-gradient(135deg, ${awayTeam.color}, #22d3ee);">
              ${awayTeam.shortCode}
            </div>
            <div class="team-name">${awayTeam.name}</div>
          </div>
        </div>
        <div class="match-score">
          <span>${match.homeScore || 0}</span>
          <span>:</span>
          <span>${match.awayScore || 0}</span>
        </div>
        <div class="match-info">
          <span><i class="fas fa-clock"></i> ${match.minute || '45'}'</span>
          <span><i class="fas fa-map-marker-alt"></i> ${match.venue || 'Stadium'}</span>
          <span><i class="fas fa-trophy"></i> Round ${match.round}</span>
        </div>
      </div>
    `;
  }).join('');
}

// Load Upcoming Matches
function loadUpcomingMatches() {
  const upcomingMatches = playerData.matches
    .filter(m => m.status === 'scheduled')
    .slice(0, 3);
  
  const container = document.getElementById('upcomingMatches');
  
  if (upcomingMatches.length === 0) {
    container.innerHTML = `
      <div class="text-center" style="padding: 2rem; color: #6b7280;">
        <i class="fas fa-calendar-plus" style="font-size: 2rem; margin-bottom: 1rem; color: #d1d5db;"></i>
        <p>No upcoming matches scheduled</p>
      </div>
    `;
    return;
  }
  
  container.innerHTML = upcomingMatches.map(match => {
    const homeTeam = playerData.teams.find(t => t.id === match.homeTeamId);
    const awayTeam = playerData.teams.find(t => t.id === match.awayTeamId);
    
    return `
      <div class="match-card">
        <div class="match-teams">
          <div class="team">
            <div class="team-logo" style="background: linear-gradient(135deg, ${homeTeam.color}, #22d3ee);">
              ${homeTeam.shortCode}
            </div>
            <div class="team-name">${homeTeam.name}</div>
          </div>
          <div class="vs">VS</div>
          <div class="team">
            <div class="team-logo" style="background: linear-gradient(135deg, ${awayTeam.color}, #22d3ee);">
              ${awayTeam.shortCode}
            </div>
            <div class="team-name">${awayTeam.name}</div>
          </div>
        </div>
        <div class="match-info">
          <span><i class="fas fa-calendar"></i> ${formatDate(match.date)}</span>
          <span><i class="fas fa-clock"></i> ${match.time}</span>
          <span>Round ${match.round}</span>
        </div>
      </div>
    `;
  }).join('');
}

// Load Recent Results
function loadRecentResults() {
  const recentMatches = playerData.matches
    .filter(m => m.status === 'completed')
    .slice(-3)
    .reverse();
  
  const container = document.getElementById('recentResults');
  
  if (recentMatches.length === 0) {
    container.innerHTML = `
      <div class="text-center" style="padding: 2rem; color: #6b7280;">
        <i class="fas fa-history" style="font-size: 2rem; margin-bottom: 1rem; color: #d1d5db;"></i>
        <p>No matches played yet</p>
      </div>
    `;
    return;
  }
  
  container.innerHTML = recentMatches.map(match => {
    const homeTeam = playerData.teams.find(t => t.id === match.homeTeamId);
    const awayTeam = playerData.teams.find(t => t.id === match.awayTeamId);
    
    return `
      <div class="match-card">
        <div class="match-teams">
          <div class="team">
            <div class="team-name" style="text-align: right;">${homeTeam.name}</div>
            <div style="font-size: 1.5rem; font-weight: 800; color: #3b82f6;">
              ${match.homeScore}
            </div>
          </div>
          <div class="vs">-</div>
          <div class="team">
            <div style="font-size: 1.5rem; font-weight: 800; color: #3b82f6;">
              ${match.awayScore}
            </div>
            <div class="team-name" style="text-align: left;">${awayTeam.name}</div>
          </div>
        </div>
        <div class="match-info">
          <span><i class="fas fa-calendar"></i> ${formatDate(match.date)}</span>
          <span>Round ${match.round}</span>
        </div>
      </div>
    `;
  }).join('');
}

// Load Standings
function loadStandings() {
  const tournamentId = document.getElementById('tournamentSelect').value;
  if (!tournamentId) return;
  
  const teams = playerData.teams.filter(t => t.tournamentId == tournamentId);
  
  // Calculate standings from matches
  const standings = teams.map(team => {
    const teamMatches = playerData.matches.filter(m => 
      (m.homeTeamId === team.id || m.awayTeamId === team.id) && 
      m.status === 'completed' &&
      playerData.teams.find(t => t.id === (m.homeTeamId === team.id ? m.awayTeamId : m.homeTeamId))?.tournamentId == tournamentId
    );
    
    let stats = {
      teamId: team.id,
      teamName: team.name,
      played: 0,
      wins: 0,
      draws: 0,
      losses: 0,
      goalsFor: 0,
      goalsAgainst: 0,
      points: 0
    };
    
    teamMatches.forEach(match => {
      stats.played++;
      
      const isHome = match.homeTeamId === team.id;
      const teamScore = isHome ? match.homeScore : match.awayScore;
      const oppScore = isHome ? match.awayScore : match.homeScore;
      
      stats.goalsFor += teamScore;
      stats.goalsAgainst += oppScore;
      
      if (teamScore > oppScore) {
        stats.wins++;
        stats.points += 3;
      } else if (teamScore < oppScore) {
        stats.losses++;
      } else {
        stats.draws++;
        stats.points += 1;
      }
    });
    
    return stats;
  });
  
  // Sort standings
  standings.sort((a, b) => {
    if (b.points !== a.points) return b.points - a.points;
    const aGD = a.goalsFor - a.goalsAgainst;
    const bGD = b.goalsFor - b.goalsAgainst;
    if (bGD !== aGD) return bGD - aGD;
    return b.goalsFor - a.goalsFor;
  });
  
  // Display standings
  const container = document.getElementById('standingsTable');
  container.innerHTML = standings.map((team, index) => {
    const teamObj = playerData.teams.find(t => t.id === team.teamId);
    const isPlayerTeam = playerData.currentPlayer && playerData.currentPlayer.teamId === team.teamId;
    
    // Generate random form for demo
    const form = ['W', 'D', 'L', 'W', 'W'];
    
    return `
      <tr ${isPlayerTeam ? 'style="background: #f0f9ff;"' : ''}>
        <td style="font-weight: 700; ${isPlayerTeam ? 'color: #3b82f6;' : ''}">${index + 1}</td>
        <td style="text-align: left;">
          <div class="d-flex align-center gap-2">
            <div style="width: 20px; height: 20px; background: ${teamObj.color}; border-radius: 4px;"></div>
            <strong>${team.teamName}</strong>
          </div>
        </td>
        <td>${team.played}</td>
        <td>${team.wins}</td>
        <td>${team.draws}</td>
        <td>${team.losses}</td>
        <td>${team.goalsFor}</td>
        <td>${team.goalsAgainst}</td>
        <td>${team.goalsFor - team.goalsAgainst}</td>
        <td style="font-weight: 700;">${team.points}</td>
        <td>
          <div class="form-indicator">
            ${form.map(result => {
              if (result === 'W') return '<div class="form-win">W</div>';
              if (result === 'D') return '<div class="form-draw">D</div>';
              return '<div class="form-loss">L</div>';
            }).join('')}
          </div>
        </td>
      </tr>
    `;
  }).join('');
}

// Load Players
function loadPlayers() {
  const tournamentId = document.getElementById('tournamentSelect').value;
  if (!tournamentId) return;
  
  // Get teams in this tournament
  const tournamentTeams = playerData.teams.filter(t => t.tournamentId == tournamentId);
  const teamIds = tournamentTeams.map(t => t.id);
  
  // Get players in these teams
  const tournamentPlayers = playerData.players.filter(p => teamIds.includes(p.teamId));
  
  // Sort by goals
  tournamentPlayers.sort((a, b) => (b.stats?.goals || 0) - (a.stats?.goals || 0));
  
  const container = document.getElementById('playersTable');
  container.innerHTML = tournamentPlayers.map((player, index) => {
    const team = playerData.teams.find(t => t.id === player.teamId);
    const isCurrentPlayer = playerData.currentPlayer && playerData.currentPlayer.id === player.id;
    
    return `
      <tr ${isCurrentPlayer ? 'style="background: #f0f9ff;"' : ''}>
        <td style="font-weight: 700;">${index + 1}</td>
        <td style="text-align: left;">
          <strong ${isCurrentPlayer ? 'style="color: #3b82f6;"' : ''}>${player.name}</strong>
          ${isCurrentPlayer ? ' <span style="color: #3b82f6; font-size: 0.8rem;">(You)</span>' : ''}
        </td>
        <td>${team ? team.name : 'N/A'}</td>
        <td>${player.position ? player.position.charAt(0).toUpperCase() + player.position.slice(1) : 'N/A'}</td>
        <td>${player.stats?.matches || 0}</td>
        <td>${player.stats?.goals || 0}</td>
        <td>${player.stats?.assists || 0}</td>
        <td>${player.stats?.rating ? player.stats.rating.toFixed(1) : '0.0'}</td>
      </tr>
    `;
  }).join('');
  
  // Update top scorers table
  const topScorersContainer = document.getElementById('topScorersTable');
  topScorersContainer.innerHTML = tournamentPlayers.slice(0, 10).map((player, index) => {
    const team = playerData.teams.find(t => t.id === player.teamId);
    
    return `
      <tr>
        <td style="font-weight: 700;">${index + 1}</td>
        <td style="text-align: left;"><strong>${player.name}</strong></td>
        <td>${team ? team.name : 'N/A'}</td>
        <td>${player.stats?.matches || 0}</td>
        <td style="font-weight: 700; color: #3b82f6;">${player.stats?.goals || 0}</td>
        <td>${player.stats?.assists || 0}</td>
        <td>${player.stats?.rating ? player.stats.rating.toFixed(1) : '0.0'}</td>
      </tr>
    `;
  }).join('');
}

// Section Navigation
function showSection(sectionId) {
  // Hide all sections
  document.querySelectorAll('.player-section').forEach(section => {
    section.classList.add('hidden');
  });
  
  // Remove active class from all nav links
  document.querySelectorAll('.player-nav-link').forEach(link => {
    link.classList.remove('active');
  });
  
  // Show selected section
  document.getElementById(sectionId + 'Section').classList.remove('hidden');
  
  // Add active class to clicked nav link
  event.target.classList.add('active');
  
  // Load data for section
  switch(sectionId) {
    case 'dashboard':
      loadPlayerData();
      break;
    case 'matches':
      loadAllMatches();
      break;
    case 'standings':
      loadStandings();
      break;
    case 'players':
      loadPlayers();
      break;
    case 'profile':
      updatePlayerProfile();
      break;
  }
}

// Load All Matches
function loadAllMatches() {
  const tournamentId = document.getElementById('tournamentSelect').value;
  const filter = document.getElementById('matchFilter').value;
  
  let matches = playerData.matches;
  
  if (tournamentId) {
    matches = matches.filter(m => m.tournamentId == tournamentId);
  }
  
  if (filter === 'upcoming') {
    matches = matches.filter(m => m.status === 'scheduled');
  } else if (filter === 'live') {
    matches = matches.filter(m => m.status === 'live');
  } else if (filter === 'completed') {
    matches = matches.filter(m => m.status === 'completed');
  } else if (filter === 'myteam' && playerData.currentPlayer) {
    matches = matches.filter(m => 
      m.homeTeamId === playerData.currentPlayer.teamId || 
      m.awayTeamId === playerData.currentPlayer.teamId
    );
  }
  
  // Populate round selector
  const roundSelect = document.getElementById('matchRound');
  const rounds = [...new Set(matches.map(m => m.round).sort((a, b) => a - b))];
  roundSelect.innerHTML = '<option value="all">All Rounds</option>';
  rounds.forEach(round => {
    roundSelect.innerHTML += `<option value="${round}">Round ${round}</option>`;
  });
  
  const container = document.getElementById('allMatches');
  
  if (matches.length === 0) {
    container.innerHTML = `
      <div class="text-center" style="padding: 3rem; color: #6b7280;">
        <i class="fas fa-futbol" style="font-size: 3rem; margin-bottom: 1rem; color: #d1d5db;"></i>
        <p>No matches found</p>
      </div>
    `;
    return;
  }
  
  container.innerHTML = matches.map(match => {
    const homeTeam = playerData.teams.find(t => t.id === match.homeTeamId);
    const awayTeam = playerData.teams.find(t => t.id === match.awayTeamId);
    
    const statusColor = match.status === 'live' ? '#f59e0b' :
                       match.status === 'completed' ? '#10b981' :
                       match.status === 'scheduled' ? '#3b82f6' : '#6b7280';
    
    return `
      <div class="match-card">
        <div class="match-teams">
          <div class="team">
            <div class="team-logo" style="background: linear-gradient(135deg, ${homeTeam.color}, #22d3ee);">
              ${homeTeam.shortCode}
            </div>
            <div class="team-name">${homeTeam.name}</div>
          </div>
          <div class="vs">VS</div>
          <div class="team">
            <div class="team-logo" style="background: linear-gradient(135deg, ${awayTeam.color}, #22d3ee);">
              ${awayTeam.shortCode}
            </div>
            <div class="team-name">${awayTeam.name}</div>
          </div>
        </div>
        <div class="match-score">
          <span>${match.homeScore || 0}</span>
          <span>-</span>
          <span>${match.awayScore || 0}</span>
        </div>
        <div class="match-info">
          <span style="color: ${statusColor}; font-weight: 600;">
            <i class="fas fa-circle" style="font-size: 0.5rem; vertical-align: middle;"></i>
            ${match.status.toUpperCase()}
          </span>
          <span><i class="fas fa-calendar"></i> ${formatDate(match.date)} ${match.time}</span>
          <span>Round ${match.round}</span>
        </div>
      </div>
    `;
  }).join('');
}

// Filter Matches
function filterMatches() {
  loadAllMatches();
}

function filterByRound() {
  const round = document.getElementById('matchRound').value;
  if (round === 'all') return loadAllMatches();
  
  const matches = document.querySelectorAll('#allMatches .match-card');
  matches.forEach(card => {
    const roundText = card.querySelector('.match-info span:nth-child(3)').textContent;
    if (roundText.includes(`Round ${round}`)) {
      card.style.display = 'block';
    } else {
      card.style.display = 'none';
    }
  });
}

// Change Standings View
function changeStandingsView() {
  const view = document.getElementById('standingsView').value;
  
  document.getElementById('standingsTableView').classList.add('hidden');
  document.getElementById('topScorersView').classList.add('hidden');
  
  if (view === 'table') {
    document.getElementById('standingsTableView').classList.remove('hidden');
  } else {
    document.getElementById('topScorersView').classList.remove('hidden');
  }
}

// Search Players
function searchPlayers() {
  const searchTerm = document.getElementById('playerSearch').value.toLowerCase();
  const rows = document.querySelectorAll('#playersTable tr');
  
  rows.forEach(row => {
    const playerName = row.querySelector('td:nth-child(2)').textContent.toLowerCase();
    if (playerName.includes(searchTerm) || searchTerm === '') {
      row.style.display = '';
    } else {
      row.style.display = 'none';
    }
  });
}

function filterPlayers() {
  const filter = document.getElementById('playerFilter').value;
  const rows = document.querySelectorAll('#playersTable tr');
  
  rows.forEach((row, index) => {
    if (index === 0) return; // Skip header
    
    const position = row.querySelector('td:nth-child(4)').textContent.toLowerCase();
    const isCurrentPlayer = row.querySelector('td:nth-child(2)').textContent.includes('(You)');
    
    let show = false;
    
    if (filter === 'all') show = true;
    else if (filter === 'forwards') show = position.includes('forward');
    else if (filter === 'midfielders') show = position.includes('midfielder');
    else if (filter === 'defenders') show = position.includes('defender');
    else if (filter === 'goalkeepers') show = position.includes('goalkeeper');
    else if (filter === 'myteam') show = isCurrentPlayer;
    
    row.style.display = show ? '' : 'none';
  });
}

// Registration
function showRegistration() {
  showSection('registration');
  document.querySelectorAll('.player-nav-link').forEach(link => {
    link.classList.remove('active');
  });
}

function registerPlayer() {
  const name = document.getElementById('registerName').value.trim();
  const email = document.getElementById('registerEmail').value.trim();
  const tournamentId = document.getElementById('registerTournament').value;
  const position = document.getElementById('registerPosition').value;
  
  if (!name || !email || !tournamentId) {
    alert('Please fill all required fields');
    return;
  }
  
  // Create new player
  const newPlayer = {
    id: Date.now(),
    name: name,
    email: email,
    teamId: null, // Will be assigned by admin
    position: position,
    avatar: name.split(' ').map(n => n[0]).join(''),
    stats: {
      matches: 0,
      goals: 0,
      assists: 0,
      rating: 6.0,
      form: []
    },
    joined: new Date().toISOString().split('T')[0],
    tournaments: [parseInt(tournamentId)]
  };
  
  playerData.currentPlayer = newPlayer;
  playerData.players.push(newPlayer);
  
  savePlayerData();
  updatePlayerProfile();
  showSection('dashboard');
  loadPlayerData();
  
  alert('Registration successful! You can now view the dashboard.');
}

// Start Live Updates
function startLiveUpdates() {
  if (playerData.updateInterval) clearInterval(playerData.updateInterval);
  
  playerData.updateInterval = setInterval(() => {
    if (playerData.liveUpdates) {
      simulateLiveUpdates();
      refreshPlayerData();
    }
  }, 10000); // Update every 10 seconds
}

// Simulate Live Updates
function simulateLiveUpdates() {
  // Randomly update live matches
  const liveMatches = playerData.matches.filter(m => m.status === 'live');
  
  liveMatches.forEach(match => {
    // Randomly add goals
    if (Math.random() > 0.85) {
      if (Math.random() > 0.5) {
        match.homeScore++;
      } else {
        match.awayScore++;
      }
    }
    
    // Increment minute
    if (match.minute < 90) {
      match.minute = (match.minute || 0) + 1;
    } else {
      match.status = 'completed';
    }
  });
  
  // Randomly start new matches
  const scheduledMatches = playerData.matches.filter(m => m.status === 'scheduled');
  if (scheduledMatches.length > 0 && Math.random() > 0.9) {
    const randomMatch = scheduledMatches[Math.floor(Math.random() * scheduledMatches.length)];
    randomMatch.status = 'live';
    randomMatch.minute = 1;
  }
  
  savePlayerData();
}

// Refresh Player Data
function refreshPlayerData() {
  const currentSection = document.querySelector('.player-section:not(.hidden)').id;
  
  switch(currentSection) {
    case 'dashboardSection':
      loadPlayerData();
      break;
    case 'matchesSection':
      loadAllMatches();
      break;
    case 'standingsSection':
      loadStandings();
      break;
    case 'playersSection':
      loadPlayers();
      break;
  }
  
  // Show update notification
  const liveUpdates = document.getElementById('liveUpdates');
  liveUpdates.style.background = '#10b981';
  setTimeout(() => {
    liveUpdates.style.background = '';
  }, 1000);
}

// Edit Profile
function editProfile() {
  const emailInput = document.getElementById('profileEmail');
  emailInput.readOnly = false;
  emailInput.focus();
  
  // Change button to save
  const button = event.target;
  button.innerHTML = '<i class="fas fa-save"></i> Save';
  button.onclick = saveProfile;
}

function saveProfile() {
  const email = document.getElementById('profileEmail').value.trim();
  
  if (!email.includes('@')) {
    alert('Please enter a valid email');
    return;
  }
  
  playerData.currentPlayer.email = email;
  savePlayerData();
  
  // Change button back to edit
  const button = event.target;
  button.innerHTML = '<i class="fas fa-edit"></i> Edit';
  button.onclick = editProfile;
  
  document.getElementById('profileEmail').readOnly = true;
  alert('Profile updated successfully!');
}

// Utility Functions
function formatDate(dateString) {
  const date = new Date(dateString);
  return date.toLocaleDateString('en-US', { 
    month: 'short', 
    day: 'numeric' 
  });
}

function setupEventListeners() {
  // Auto-refresh when tab becomes visible
  document.addEventListener('visibilitychange', () => {
    if (!document.hidden) {
      refreshPlayerData();
    }
  });
}

// Initialize on load
document.addEventListener('DOMContentLoaded', initPlayerDashboard);
</script>
</body>
</html>
